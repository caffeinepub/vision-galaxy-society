{
  "kind": "build_request",
  "title": "Redeploy app to IC mainnet and provide live URL + failure remediation",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Redeploy the current version to the Internet Computer (network: ic) using the existing retry-based deployment workflow, and ensure the final deployment output includes (1) the live frontend URL and (2) the frontend canister ID.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "Live it"
        ]
      },
      "acceptanceCriteria": [
        "Running the deployment workflow completes a successful `dfx deploy --network ic` for the project.",
        "On success, the output clearly shows the frontend canister ID (e.g., from `dfx canister id frontend --network ic`).",
        "On success, the output clearly shows a live frontend URL (either `VITE_CANONICAL_APP_URL` when set, or `https://<frontend_canister_id>.ic0.app`)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "If mainnet redeploy fails, capture the exact deployment error output, classify the failure as either (A) canister reservation/creation failure (including CaLM) or (B) generic failure, and provide next-step remediation instructions aligned with the existing deployment scripts (including pre-creating canisters and rerunning deployment with retries).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "Live it"
        ]
      },
      "acceptanceCriteria": [
        "For failed deployments, full stdout/stderr is saved to log files under `frontend/deploy/logs` for each attempt.",
        "Failure classification distinguishes canister reservation/creation failures (e.g., CaLM reservation issues, canister creation/reservation failures) from generic failures.",
        "When classified as canister reservation/creation failure, instructions include running `./frontend/deploy/ic-precreate-canisters.sh` and then rerunning `./frontend/deploy/ic-deploy-with-retry.sh` (or deploying directly with `dfx deploy --network ic`).",
        "When classified as generic failure, output provides the last error lines and points to `frontend/docs/deployment-troubleshooting.md` for further steps."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo`; do not introduce additional backend services.",
    "Do not modify files under `frontend/src/components/ui` or other immutable frontend paths specified by SYSTEM_CONTEXT.",
    "Use English for any user-facing text."
  ],
  "nonGoals": [
    "Adding new product features to the app itself (UI/backend functionality unrelated to deployment).",
    "Introducing non-IC deployment targets or third-party hosting providers."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}